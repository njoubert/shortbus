<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<style>
</style>
<body>
<h3>Sender 1:</h3>
<div>User ID: <span id="user1"></span></div>
<div>Send msg: <input type="text" id="send1"><input type="button" value="Send" onclick="send1();">
<h4>Received:</h4>
<pre>
<div id="data1"></div>
</pre>
<h3>Sender 1:</h3>
<div>User ID: <span id="user2"></span></div>
<div>Send msg: <input type="text" id="send2"><input type="button" value="Send" onclick="send2();">
<pre>
<div id="data2"></div>
</pre>
</body>
<script src="shortbus.js"></script>
<script>

const bus1 = new MessageBus();
const bus2 = new MessageBus();


function send1(id) {bus1.send(document.getElementById("send1").value);}
function send2(id) {bus2.send(document.getElementById("send2").value);}

document.addEventListener("DOMContentLoaded", function() {
  bus1.addEventListener(function(message) {
    const dataEl = document.getElementById("data1");
    dataEl.innerHTML = JSON.stringify(message) + "\n" + dataEl.innerHTML;
  });
  bus2.addEventListener(function(message) {
    const dataEl = document.getElementById("data2");
    dataEl.innerHTML = JSON.stringify(message) + "\n" + dataEl.innerHTML;
  });

  //const send1 = document.getElementById("send1");
  //const send2 = document.getElementById("send2");
});
</script>
</html>
